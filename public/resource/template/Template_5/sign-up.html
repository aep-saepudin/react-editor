<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport"    content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author"      content="Sergey Pozhilov (GetTemplate.com)">

	<title>Web Builder Template</title>

	<link rel="shortcut icon" href="assets/images/favicon.png">

	<!-- Bootstrap -->
	<link href="assets/css/bootstrap.no-icons.min.css" rel="stylesheet">
	<!-- Icons -->
	<link href="assets/css/font-awesome.css" rel="stylesheet">
	<!-- Fonts -->
	<link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!-- Custom styles -->
	<link rel="stylesheet" href="assets/css/styles.css">

	<!--[if lt IE 9]> <script src="assets/js/html5shiv.js"></script> <![endif]-->
</head>
<body>

<header id="header">
	<div id="head" class="parallax qw-section" parallax-speed="2">
		<h1 id="logo" class="text-center" style="color: white;">
			<span class="title">Sign Up</span>
			<span class="tagline">Example Tagline<br>
				<a href="#">example.blabla@example.com</a></span>
		</h1>
	</div>
	<nav class="navbar navbar-default navbar-sticky" style="margin-bottom: 0px">
		<div class="container-fluid">

			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
			</div>

			<div class="navbar-collapse collapse">

				<ul class="nav navbar-nav qw-list-item">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="profile.html">Profile</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="product.html">Product</a></li>
                    <li><a href="gallery.html">Gallery</a></li>
                    <li class="qw-list-default"><a href="default.html">Default</a></li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-account>Account<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="sign-up.html">Sign Up</a></li>
                            <li><a href="login.html">Login</a></li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-login>My Account<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="account.html">My Account</a></li>
                            <li><a href="change-pass.html">Change Password</a></li>
                            <li><a href="address-book.html">Address Book</a></li>
                            <li><a href="view-cart.html">List Cart</a></li>
                            <li><a href="whistlist.html">Whist List</a></li>
                            <li><a href="order-history.html">Order History</a></li>
                            <li><a href="rewards-points.html">Rewards Points</a></li>
                            <li><a href="transactions.html">Transactions</a></li>
                        </ul>
                    </li>
                </ul>

			</div><!--/.nav-collapse -->
		</div>
	</nav>
</header>


<main id="main">

	<section class="row topspace" id="contact-map">
		<div class="container" id="form-sign-up">
			<div class="col-sm-12" id="parent">
                <div class="col-md-6">
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>First Name</label>
                            <input type="text" class="form-control" id="first_name" name="first_name" required data-validation-required-message="Please enter your first name.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Last Name</label>
                            <input type="text" class="form-control" id="last_name" name="last_name" required data-validation-required-message="Please enter your last name.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Email Address</label>
                            <input type="email" class="form-control" id="email" name="email" required data-validation-required-message="Please enter your email address.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Telepon</label>
                            <input type="tel" class="form-control" id="telepon" name="telepon" required data-validation-required-message="Please enter your phone number.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Password</label>
                            <input type="password" class="form-control" id="password" name="password" required data-validation-required-message="Please enter your password.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Konfirm Password</label>
                            <input type="password" class="form-control" id="kpassword" name="kpassword" required data-validation-required-message="Please enter your konfirm password.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>First Name Address</label>
                            <input type="text" class="form-control" id="firstname_ad" name="firstname_ad" required data-validation-required-message="Please enter your first name address.">
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Last Name Address</label>
                            <input type="text" class="form-control" id="lastname_ad" name="lastname_ad" required data-validation-required-message="Please enter your last name address.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Company Address</label>
                            <input type="text" class="form-control" id="company_ad" name="company_ad" required data-validation-required-message="Please enter your company address.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Address</label>
                            <input type="text" class="form-control" id="address_ad" name="address_ad" required data-validation-required-message="Please enter your address.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Country</label>
                            <select name="country" class="form-control" required data-validation-required-message="Please enter your country" id="country" disabled="true">
                                <option value="">- Choose Country -</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Region</label>
                            <select name="region" class="form-control" required data-validation-required-message="Please enter your region" id="region">
                                <option value="">- Choose Region -</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>City</label>
                            <select name="city" class="form-control" required data-validation-required-message="Please enter your city" id="city">
                                <option value="">- Choose City -</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Postal Code</label>
                            <input type="text" class="form-control" id="post_code" name="post_code" required data-validation-required-message="Please enter your postal code.">
                        </div>
                    </div>
                </div>
                <center>
	                <div class="control-group form-group">
	                    <div class="controls">
			                <div id="success"></div>
			                <!-- For success/fail messages -->
			                <button class="btn btn-primary" id="btn-signup">Sign Up</button>
			            </div>
			        </div>
                </center>
		    </div>
		</div>

        <div class="container" id="info-sign-up" style="display: none;">
            <div class="col-sm-12" id="parent">
                <div class="col-md-6">
                    Sign Up Berhasil
                </div>
            </div>
        </div>
	</section>

</main>

<footer id="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-3 widget">
				<h3 class="widget-title">Contact</h3>
				<div class="widget-body">
					<p>+622152905148<br>
						<a href="mailto:#">example.blabla@example.com</a><br>
						<br>
						Jl. Coblong Selatan Bandung
					</p>
				</div>
			</div>

			<div class="col-md-3 widget">
				<h3 class="widget-title">Follow me</h3>
				<div class="widget-body">
					<p class="follow-me-icons">
						<a href="#"><i class="fa fa-twitter fa-2"></i></a>
						<a href="#"><i class="fa fa-dribbble fa-2"></i></a>
						<a href="#"><i class="fa fa-github fa-2"></i></a>
						<a href="#"><i class="fa fa-facebook fa-2"></i></a>
					</p>
				</div>
			</div>

			<div class="col-md-3 widget">
				<h3 class="widget-title">Text widget</h3>
				<div class="widget-body">
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque, nihil natus explicabo ipsum quia iste aliquid repellat eveniet velit ipsa sunt libero sed aperiam id soluta officia asperiores adipisci maxime!</p>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque, nihil natus explicabo ipsum quia iste aliquid repellat eveniet velit ipsa sunt libero sed aperiam id soluta officia asperiores adipisci maxime!</p>
				</div>
			</div>

			<div class="col-md-3 widget">
				<h3 class="widget-title">Form widget</h3>
				<div class="widget-body">
					<p>+622152905148<br>
						<a href="mailto:#">example.blabla@example.com</a><br>
						<br>
						Jl. Coblong Selatan Bandung
					</p>
				</div>
			</div>

		</div> <!-- /row of widgets -->
	</div>
    <div class="container">
		<div class="row">

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p>BDG JUARA </p>
				</div>
			</div>

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p class="text-right">
						Copyright &copy; 2017, Web Builder Template<br>
						Design: <a href="#" rel="designer">Web Builder Template</a> </p>
				</div>
			</div>

		</div> <!-- /row of widgets -->
	</div>
</footer>
<a id="back-to-top" href="#" class="btn btn-primary back-to-top" role="button" title="Click to return on the top page" data-toggle="tooltip" data-placement="left"><span class="fa fa-arrow-up"></span></a>

<!-- JavaScript libs are placed at the end of the document so the pages load faster -->

	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/template.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

	<script>
        $(document).ready(function(){
            jQuery.get('scid.txt', function(value) {
                var obj = JSON.parse(value);

                $.post('getdata.php',function(customer_id){
                    if(customer_id){
                        $.post("https://build.web.id/api/customers/getCustomerdatabyId/",{
                            "client_id": obj.cid,
                            "service_id": obj.layanan_id,
                            "customer_id": customer_id
                        },function(data){
                            firstname = data.data.firstname;
                            lastname = data.data.lastname;
                            $('[data-login]').html(firstname+' '+lastname+' <b class="caret"></b>')
                            $('[data-account]').hide()
                        }); 
                    }else{
                        $('[data-login]').hide()
                        $('[data-account]').show()
                    }
                });

                //get select country
                $.post("https://build.web.id/api/customers/getCountry/",{
                    client_id: obj.cid,
                    service_id: obj.layanan_id
                },
                function(data,status){
                    var len = data.data.length;
                    for (var i = 0; i < len; i++) {
                        if(data.data[i]['country_id']==100){
                            var select = 'selected';
                        }else{
                            var select = '';
                        }
                        $('#country').append("<option value="+data.data[i]['country_id']+" "+select+">"+data.data[i]['name']+"</option>");
                    }
                });

                /*$('#country').change(function(){
                    var country_id = $('#country').val();
                    //get select region
                    $.post("https://build.web.id/api/customers/getZone/",{
                        client_id: obj.cid,
                        service_id: obj.layanan_id,
                        country_id: country_id
                    },
                    function(data,status){
                        var len = data.data.length;
                        $('#region').empty();
                        for (var i = 0; i < len; i++) {
                            $('#region').append("<option value="+data.data[i]['zone_id']+">"+data.data[i]['name']+"</option>");
                        }
                    });
                });*/

                //get select prov
                $.post("https://build.web.id/api/Qwords_Shipping/getProvince/",{
                    client_id: obj.cid,
                    service_id: obj.layanan_id
                },
                function(data){
                    var len = data.data.length;
                    for (var i = 0; i < len; i++) {
                        $('#region').append("<option value="+data.data[i]['province_id']+">"+data.data[i]['province']+"</option>");
                    }
                });

                $('#region').change(function(){
                    var province_id = $('#region').val();
                    //get select region
                    $.post("https://build.web.id/api/Qwords_Shipping/getCityOfProvince/",{
                        client_id: obj.cid,
                        service_id: obj.layanan_id,
                        province: province_id
                    },
                    function(data,status){
                        var len = data.data.length;
                        $('#city').empty();
                        for (var i = 0; i < len; i++) {
                            $('#city').append("<option value="+data.data[i]['city_id']+">"+data.data[i]['type']+" "+data.data[i]['city_name']+"</option>");
                        }
                    });
                });

                $('#btn-signup').click(function(){
                    var first_name = $('#first_name').val();
                    var last_name = $('#last_name').val();
                    var email = $('#email').val();
                    var telephone = $('#telepon').val();
                    var password = $('#password').val();
                    var firstname_ad = $('#firstname_ad').val();
                    var lastname_ad = $('#lastname_ad').val();
                    var company_ad = $('#company_ad').val();
                    var address_ad = $('#address_ad').val();
                    var city = $('#city').val();
                    var postalcode_ad = $('#post_code').val();
                    var country_ad = $('#country').val();
                    var region_ad = $('#region').val();

                    jQuery.get('scid.txt', function(value) {
                        var obj = JSON.parse(value);
                        $.post("https://build.web.id/api/customers/register/",{
                            "client_id": obj.cid,
                            "service_id": obj.layanan_id,
                            "firstname": first_name,
                            "lastname": last_name,
                            "email": email,
                            "telephone": telephone,
                            "password": password,
                            "firstname_ad": firstname_ad,
                            "lastname_ad": lastname_ad,
                            "company_ad": company_ad,
                            "address_ad": address_ad,
                            "city_ad": city,
                            "postalcode_ad": postalcode_ad,
                            "country_ad": country_ad,
                            "region_ad": region_ad
                        },
                        function(data){
                            var status = data.status;
                            var msg = data.msg;

                            if(status==false){
                                swal(msg);
                                swal("Error", msg, "error");
                            }else{
                                swal("Good job!", "Registration success!", "success")
                                .then((value) => {
                                    window.location.href = "index.html";
                                });
                            }
                        });
                    });
                });
            });
        });
    </script>
</body>
</html>
