<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Website Builder Template</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/modern-business.css" rel="stylesheet">

    <!-- Animate CSS -->
    <link rel="stylesheet" href="css/animate.css">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<header>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <img src="user-image/logo.png">
                <!--button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Logo</a-->
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right qw-list-item">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="profile.html">Profile</a>
                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                    <li>
                        <a href="product.html">Product</a>
                    </li>
                    <li>
                        <a href="gallery.html">Gallery</a>
                    </li>
                    <li>
                        <a href="bonus.html">Bonus</a>
                    </li>
                    <li class="qw-list-default">
                        <a href="default.html">Default</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-account>Account <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="sign-up.html">Sign Up</a>
                            </li>
                            <li>
                                <a href="login.html">Login</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-login>My Account <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li>
                                <a href="account.html">My Account</a>
                            </li>
                            <li>
                                <a href="change-pass.html">Change Password</a>
                            </li>
                            <li>
                                <a href="address-book.html">Address Book</a>
                            </li>
                            <li>
                                <a href="view-cart.html">List Cart</a>
                            </li>
                            <li>
                                <a href="whistlist.html">Whist List</a>
                            </li>
                            <li>
                                <a href="order-history.html">Order History</a>
                            </li>
                            <li>
                                <a href="rewards-points.html">Rewards Points</a>
                            </li>
                            <li>
                                <a href="transactions.html">Transactions</a>
                            </li>
                            <li>
                                <a href="logout.php">Logout</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="view-cart.html">
                            <i class="fa fa-shopping-cart"></i> (<span count-cart>0</span>)
                        </a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
</header>

    <section id="sign-up">
    <!-- Page Content -->
    <div class="container">
        <!-- Contact Form -->
        <!-- In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
        <div class="row" style="padding-top: 15px;">
            	<div class="col-md-3">
                </div>
                <div class="col-md-6" style="padding-top: 50px; padding-bottom: 50px">
                	<h3>My Account Information</h3>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>First Name</label>
                            <input type="text" class="form-control" id="first_name" name="first_name" required data-validation-required-message="Please enter your first name.">
                            <p class="help-block"></p>
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Last Name</label>
                            <input type="text" class="form-control" id="last_name" name="last_name" required data-validation-required-message="Please enter your last name.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Email Address</label>
                            <input type="email" class="form-control" id="email" name="email" required data-validation-required-message="Please enter your email address." readonly="true">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Telepon</label>
                            <input type="tel" class="form-control" id="telepon" name="telepon" required data-validation-required-message="Please enter your phone number.">
                        </div>
                    </div>
                    <div class="control-group form-group">
                        <div class="controls">
                            <label>Fax</label>
                            <input type="tel" class="form-control" id="fax" name="fax" required data-validation-required-message="Please enter your phone number.">
                        </div>
                    </div>
                    <div style="clear: both;"></div>
	                <div id="success"></div>
	                <!-- For success/fail messages -->
	                <button class="btn btn-primary" id="btn-send">Update</button>
                </div>
                <div class="col-md-3">
                </div>
        </div>
        <!-- /.row -->
        <br>
    </div>
    <!-- /.container -->
    </section>

    <!-- Footer -->
    <footer class="footer-bs">
        <div class="row">
            <div class="col-md-3 footer-brand animated fadeInLeft">
                <img src="user-image/logo.png">
                <p>Suspendisse hendrerit tellus laoreet luctus pharetra. Aliquam porttitor vitae orci nec ultricies. Curabitur vehicula, libero eget faucibus faucibus, purus erat eleifend enim, porta pellentesque ex mi ut sem.</p>
                <p>© 2017 World, All rights reserved</p>
            </div>
            <div class="col-md-3 footer-nav animated fadeInUp">
                <h4>Menu —</h4>
                <ul class="pages">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Profile</a></li>
                     <li><a href="#">Contact</a></li>
                    <li><a href="#">Product</a></li>
                    <li><a href="#">Gallery</a></li>
                </ul>
            </div>
            <div class="col-md-3 footer-social animated fadeInDown">
                <h4>Follow Us</h4>
                <ul>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Twitter</a></li>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">RSS</a></li>
                </ul>
            </div>
            <div class="col-md-3 footer-ns animated fadeInRight">
                <h4>Contact</h4>
                <p>
                    3481 Melrose Place<br>Beverly Hills, CA 90210<br>
                </p>
                <p><i class="fa fa-phone"></i> 
                    <abbr title="Phone">P</abbr>: (123) 456-7890</p>
                <p><i class="fa fa-envelope-o"></i> 
                    <abbr title="Email">E</abbr>: <a href="mailto:name@example.com">name@example.com</a>
                </p>
                <p><i class="fa fa-clock-o"></i> 
                    <abbr title="Hours">H</abbr>: Monday - Friday: 9:00 AM to 5:00 PM
                </p>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Wow JS -->
    <script src="js/wow.min.js"></script>

    <!-- Custom JS -->
    <script src="js/costume.js"></script>

    <!-- Contact Form JavaScript -->
    <!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script>
        $(document).ready(function(){
            jQuery.get('scid.txt', function(value) {
                var obj = JSON.parse(value);
                $.post('getdata.php',function(customer_id){
                    if(customer_id){
                        $.post("https://build.web.id/api/customers/getCustomerdatabyId/",{
                            "client_id": obj.cid,
                            "service_id": obj.layanan_id,
                            "customer_id": customer_id
                        },
                        function(data){
                            document.getElementById('first_name').value = data.data.firstname;
                            document.getElementById('last_name').value = data.data.lastname;
                            document.getElementById('email').value = data.data.email;
                            document.getElementById('telepon').value = data.data.telephone;
                            document.getElementById('fax').value = data.data.fax;

                            $('[data-login]').html(data.data.firstname+' '+data.data.lastname+' <b class="caret"></b>')
                        	$('[data-account]').hide()
                        }); 

                        cid = window.atob(obj.cid),
                        sid = window.atob(obj.layanan_id),
                        $.post("https://build.web.id/api/cart/content/",{
                            "client_id": cid,
                            "service_id": sid,
                            "customer_id": customer_id
                        },function(data){
                            $('[count-cart]').text(data.count)
                        });
                    }else{
                    	$('[data-login]').hide()
                    	$('[data-account]').show()

                        swal("Anda belum login!", "Silahkan login terlebih dahulu!", "info")
                        .then((value) => {
                            window.location.href = "login.html";
                        });
                    }
                });        
            }); 

            $('#btn-send').click(function(){
                jQuery.get('scid.txt', function(value) {
                    var obj = JSON.parse(value);
                    $.post('getdata.php',function(customer_id){
                        var firstname = $('#first_name').val();
                        var lastname = $('#last_name').val();
                        var telephone = $('#telepon').val();
                        var fax = $('#fax').val();

                        $.post("https://build.web.id/api/customers/updateDataCustomer/",{
                            "client_id": obj.cid,
                            "service_id": obj.layanan_id,
                            "customer_id": customer_id,
                            "firstname": firstname,
                            "lastname": lastname,
                            "telephone": telephone,
                            "fax": fax,
                        },
                        function(data){
                            swal("Success", data.msg, "success")
                        });
                    });
                });
            });
        });
    </script>

</body>

</html>
